<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ChÃºc má»«ng 20/10</title>

  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Nháº­p tÃªn -->
  <div class="name-input" id="nameInputContainer">
    <h2>Nháº­p tÃªn cá»§a ngÆ°á»i nháº­n ğŸ€</h2>
    <input type="text" id="nameInput" placeholder="Nháº­p tÃªn..." />
    <button id="startBtn">Báº¯t Ä‘áº§u</button>
  </div>

  <!-- ThÃ´ng Ä‘iá»‡p chÃºc má»«ng -->
  <div class="center-message" id="mainContent" style="display:none;">
    <strong>ChÃºc má»«ng 20-10</strong>
    <span id="centerText">
      NgÃ y Phá»¥ ná»¯ Viá»‡t Nam<br>
      Mong ngÆ°á»i Ä‘áº¹p luÃ´n ráº¡ng rá»¡ nhÆ° nhá»¯ng bÃ³ hoa!
    </span>
  </div>

  <!-- áº¢nh Ä‘á»™ng trang trÃ­ -->
  <img src="mewmew.gif" alt="GIF" class="center-gif" />

  <!-- Popup lá»i chÃºc -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <img id="popupImage" src="" alt="Lá»i chÃºc">
      <p id="popupMessage">Lá»i chÃºc á»Ÿ Ä‘Ã¢y</p>
    </div>
  </div>
  <div class="overlay" id="overlay"></div>

  <!-- Nháº¡c ná»n -->
  <audio id="player" src="a.mp3"></audio>

  <!-- Script -->
  <script>
    let userName = "";

    const messages = [
      { img: "a1.jpg", text: "ChÃºc báº¡n luÃ´n vui váº», xinh Ä‘áº¹p vÃ  ngáº­p trÃ n yÃªu thÆ°Æ¡ng!" },
      { img: "a2.jpg", text: "Má»—i ngÃ y cá»§a báº¡n Ä‘á»u lÃ  má»™t Ä‘oÃ¡ hoa ná»Ÿ rá»™." },
      { img: "a3.jpg", text: "Cáº£m Æ¡n báº¡n vÃ¬ Ä‘Ã£ luÃ´n máº¡nh máº½ vÃ  tuyá»‡t vá»i nhÆ° tháº¿!" },
      { img: "a4.jpg", text: "ChÃºc báº¡n má»™t ngÃ y 20/10 tháº­t háº¡nh phÃºc vÃ  trá»n váº¹n!" },
      { img: "a5.jpg", text: "Báº¡n lÃ  mÃ³n quÃ  tuyá»‡t vá»i nháº¥t mÃ  cuá»™c sá»‘ng mang láº¡i!" }
    ];

    const popup = document.getElementById("popup");
    const overlay = document.getElementById("overlay");
    const popupImage = document.getElementById("popupImage");
    const popupMessage = document.getElementById("popupMessage");
    const centerText = document.getElementById("centerText");

    const letterImages = [
      "letters.png",
      "q3.png",
      "h1.png",
      "h3.png",
      "t2.png",
      "t5.png",
    ];

    // === CÆ  CHáº¾ NHáº¬P TÃŠN ===
    document.getElementById("startBtn").addEventListener("click", () => {
      const nameField = document.getElementById("nameInput");
      const name = nameField.value.trim();
      if (!name) {
        alert("Vui lÃ²ng nháº­p tÃªn trÆ°á»›c khi báº¯t Ä‘áº§u!");
        return;
      }
      userName = name;

      document.getElementById("nameInputContainer").style.display = "none";
      document.getElementById("mainContent").style.display = "block";

      // báº¯t Ä‘áº§u hiá»‡u á»©ng
      setInterval(() => createFallingLetter(), 1000);
    });

    function createHeartExplosion(x, y) {
      const hearts = ['ğŸ’—'];
      const numHearts = 12;

      for (let i = 0; i < numHearts; i++) {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];

        const angle = (Math.PI * 2 / numHearts) * i;
        const distance = Math.random() * 80 + 40;

        heart.style.left = x + 'px';
        heart.style.top = y + 'px';
        heart.style.setProperty('--dx', Math.cos(angle) * distance + 'px');
        heart.style.setProperty('--dy', Math.sin(angle) * distance + 'px');
        heart.style.fontSize = (Math.random() * 10 + 20) + 'px';

        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 2000);
      }
    }

    function createFallingLetter() {
      const letter = document.createElement("img");
      const randomImage = letterImages[Math.floor(Math.random() * letterImages.length)];
      letter.src = randomImage;
      letter.classList.add("falling-letter");
      letter.style.left = Math.random() * (window.innerWidth - 50) + "px";
      letter.addEventListener("click", (e) => {
        createHeartExplosion(e.clientX, e.clientY);
        letter.classList.add('letter-clicked');
        setTimeout(() => showPopup(), 300);
      });

      document.body.appendChild(letter);
      setTimeout(() => letter.remove(), 8000);
    }

    function showPopup() {
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      const personalizedText = randomMessage.text.replace(/báº¡n/g, userName);
      popupImage.src = randomMessage.img;
      popupMessage.textContent = personalizedText;
      popup.style.display = "block";
      overlay.classList.add("active");
      popup.dataset.currentMessage = personalizedText;
    }

    function closePopup() {
      popup.style.display = "none";
      overlay.classList.remove("active");
      if (popup.dataset.currentMessage) {
        centerText.innerHTML = popup.dataset.currentMessage;
      }
    }

    overlay.addEventListener("click", closePopup);

    document.body.addEventListener("click", function () {
      const player = document.getElementById("player");
      if (player.paused) player.play();
    });
  </script>
</body>
</html>
